image:
  repository: 033691785857.dkr.ecr.us-east-1.amazonaws.com/mosaic-life/core-api
  tag: "0.1.0"
  pullPolicy: IfNotPresent

replicaCount: 2

service:
  type: ClusterIP
  port: 80

# Service Account for IRSA
serviceAccount:
  create: true
  automount: true
  # Annotations for IRSA (will be set during deployment)
  annotations:
    eks.amazonaws.com/role-arn: arn:aws:iam::033691785857:role/mosaic-prod-core-api-secrets-role
  name: ""

# External Secrets configuration
externalSecrets:
  enabled: true
  secretStore: aws-secrets-manager
  # Credentials secret name in AWS Secrets Manager (contains username/password)
  credentialsSecretName: "mosaic/prod/rds/credentials"
  region: us-east-1
  # Database connection details (set after RDS deployment)
  dbEndpoint: "" # e.g., mosaic-prod-db.xxxxx.us-east-1.rds.amazonaws.com
  dbPort: "5432"
  dbName: "mosaic"

# Database migrations
migrations:
  enabled: true
  # Run migrations automatically before deployment
  autoRun: true

env:
  ENV: dev
  LOG_LEVEL: info
  OIDC_ISSUER: ""
  OIDC_CLIENT_ID: ""
  LITELLM_BASE_URL: "http://litellm:4000"
  OPENSEARCH_URL: "http://opensearch:9200"
  SNS_TOPIC_ARN_EVENTS: ""
  SQS_QUEUE_URL_EVENTS: ""
  DATABASE_SECRET_ARN: "arn:aws:secretsmanager:us-east-1:033691785857:secret:mosaic/prod/rds/credentials-Oy5AjN"

  # AWS Region for Bedrock and other AWS services
  AWS_REGION: "us-east-1"

  # SES Email Configuration
  SES_FROM_EMAIL: "noreply@mosaiclife.me"
  SES_REGION: "us-east-1"

secrets:
  OIDC_CLIENT_SECRET: "" # sourced via External Secrets in real envs
  DB_URL: ""             # sourced via External Secrets (fallback only)

resources:
  requests:
    cpu: 100m
    memory: 256Mi
  limits:
    cpu: 1
    memory: 1Gi

