{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Welcome to Mosaic Life Documentation","text":"<p>Mosaic Life is a memorial stories platform that allows you to create, share, and preserve life stories and memories.</p>"},{"location":"#getting-started","title":"Getting Started","text":"<ul> <li>Installation - Set up your development environment</li> <li>First Steps - Create your first legacy</li> </ul>"},{"location":"#for-users","title":"For Users","text":"<ul> <li>Creating Stories - Write and edit stories</li> <li>Sharing Memories - Invite family and friends</li> </ul>"},{"location":"#for-developers","title":"For Developers","text":"<ul> <li>Local Setup - Run Mosaic Life locally</li> <li>Architecture - System design overview</li> <li>Contributing - How to contribute</li> </ul>"},{"location":"#api-reference","title":"API Reference","text":"<ul> <li>API Overview - REST API introduction</li> <li>OpenAPI Specification - Interactive API docs</li> </ul>"},{"location":"#code-reference","title":"Code Reference","text":"<ul> <li>Python API - Backend code documentation</li> <li>TypeScript API - Frontend code documentation</li> </ul>"},{"location":"changelog/","title":"Changelog","text":"<p>All notable changes to Mosaic Life are documented here.</p>"},{"location":"changelog/#unreleased","title":"[Unreleased]","text":""},{"location":"changelog/#added","title":"Added","text":"<ul> <li>Documentation site with versioned docs</li> <li>OpenAPI specification integration</li> <li>Auto-generated Python and TypeScript API references</li> </ul>"},{"location":"changelog/#changed","title":"Changed","text":"<ul> <li>N/A</li> </ul>"},{"location":"changelog/#fixed","title":"Fixed","text":"<ul> <li>N/A</li> </ul>"},{"location":"changelog/#version-history","title":"Version History","text":"<p>Versions are tagged in Git and correspond to documentation versions in the version selector above.</p>"},{"location":"api/openapi/","title":"OpenAPI Specification","text":"<p>Interactive API documentation powered by the OpenAPI specification.</p>"},{"location":"api/openapi/#swagger-ui","title":"Swagger UI","text":"<p>Interactive Documentation</p> <p>The embedded API documentation above allows you to explore endpoints, view request/response schemas, and test API calls directly.</p>"},{"location":"api/openapi/#download-specification","title":"Download Specification","text":"<p>The Mosaic Life API specification is available in JSON format:</p> <ul> <li>OpenAPI JSON - API specification</li> </ul>"},{"location":"api/openapi/#using-the-api","title":"Using the API","text":"<ol> <li>Authenticate via <code>/auth/login</code></li> <li>Use the session cookie for subsequent requests</li> <li>Explore endpoints in the documentation above</li> </ol>"},{"location":"api/overview/","title":"API Overview","text":"<p>The Mosaic Life API is a RESTful HTTP API built with FastAPI.</p>"},{"location":"api/overview/#base-url","title":"Base URL","text":"Environment URL Production <code>https://api.mosaiclife.me</code> Staging <code>https://stage-api.mosaiclife.me</code> Local <code>http://localhost:8080</code>"},{"location":"api/overview/#authentication","title":"Authentication","text":"<p>The API uses session-based authentication with Google OAuth.</p> <ol> <li>Initiate login: <code>GET /auth/login</code></li> <li>Complete OAuth flow</li> <li>Session cookie set automatically</li> </ol>"},{"location":"api/overview/#request-format","title":"Request Format","text":"<pre><code>curl -X GET https://api.mosaiclife.me/legacies \\\n  -H \"Content-Type: application/json\" \\\n  --cookie \"session=...\"\n</code></pre>"},{"location":"api/overview/#response-format","title":"Response Format","text":"<p>All responses follow this structure:</p> <pre><code>{\n  \"data\": { ... },\n  \"meta\": {\n    \"request_id\": \"abc123\"\n  }\n}\n</code></pre>"},{"location":"api/overview/#error-handling","title":"Error Handling","text":"<p>Errors return appropriate HTTP status codes:</p> Code Meaning 400 Bad Request - Invalid input 401 Unauthorized - Not logged in 403 Forbidden - Insufficient permissions 404 Not Found - Resource doesn't exist 500 Internal Error - Server issue"},{"location":"api/overview/#rate-limiting","title":"Rate Limiting","text":"<p>API requests are limited to 100 requests per minute per user.</p>"},{"location":"developer-guide/architecture/","title":"Architecture Overview","text":"<p>Mosaic Life uses a simplified MVP architecture designed for rapid development.</p>"},{"location":"developer-guide/architecture/#system-components","title":"System Components","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   React SPA     \u2502\u2500\u2500\u2500\u2500\u25b6\u2502   FastAPI       \u2502\n\u2502   (Vite)        \u2502     \u2502   (Core API)    \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                                 \u2502\n                        \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                        \u2502   PostgreSQL    \u2502\n                        \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"developer-guide/architecture/#tech-stack","title":"Tech Stack","text":""},{"location":"developer-guide/architecture/#frontend","title":"Frontend","text":"<ul> <li>React 18 + TypeScript</li> <li>Vite (build tool)</li> <li>TanStack Query (server state)</li> <li>React Router (routing)</li> </ul>"},{"location":"developer-guide/architecture/#backend","title":"Backend","text":"<ul> <li>FastAPI + Uvicorn</li> <li>SQLAlchemy 2.x + Alembic</li> <li>Pydantic v2 (validation)</li> <li>PostgreSQL 16</li> </ul>"},{"location":"developer-guide/architecture/#infrastructure","title":"Infrastructure","text":"<ul> <li>AWS EKS (Kubernetes)</li> <li>ArgoCD (GitOps)</li> <li>Helm (packaging)</li> <li>GitHub Actions (CI/CD)</li> </ul>"},{"location":"developer-guide/architecture/#key-patterns","title":"Key Patterns","text":"<ul> <li>Adapter Pattern: External integrations abstracted behind interfaces</li> <li>Repository Pattern: Data access through SQLAlchemy models</li> <li>OpenTelemetry: Distributed tracing and observability</li> </ul>"},{"location":"developer-guide/contributing/","title":"Contributing to Mosaic Life","text":"<p>We welcome contributions! This guide explains how to contribute effectively.</p>"},{"location":"developer-guide/contributing/#code-of-conduct","title":"Code of Conduct","text":"<p>Be respectful and inclusive. We're building something meaningful together.</p>"},{"location":"developer-guide/contributing/#development-workflow","title":"Development Workflow","text":"<ol> <li>Fork the repository</li> <li>Create a feature branch from <code>develop</code></li> <li>Make your changes</li> <li>Run tests and linting</li> <li>Submit a pull request</li> </ol>"},{"location":"developer-guide/contributing/#commit-messages","title":"Commit Messages","text":"<p>Use Conventional Commits format:</p> <pre><code>feat: add story search functionality\nfix: resolve date picker timezone issue\ndocs: update API authentication guide\nchore: upgrade dependencies\n</code></pre>"},{"location":"developer-guide/contributing/#pull-request-guidelines","title":"Pull Request Guidelines","text":"<ul> <li>Target &lt; 400 lines of code</li> <li>Include tests for new features</li> <li>Update documentation as needed</li> <li>Link to related GitHub issues</li> </ul>"},{"location":"developer-guide/contributing/#running-tests","title":"Running Tests","text":"<pre><code># Frontend\ncd apps/web\nnpm run test\n\n# Backend\ncd services/core-api\nuv run pytest\n</code></pre>"},{"location":"developer-guide/contributing/#code-style","title":"Code Style","text":"<ul> <li>TypeScript: ESLint + Prettier</li> <li>Python: Ruff + MyPy (strict)</li> </ul> <p>Always run <code>just validate-backend</code> before committing Python changes.</p>"},{"location":"developer-guide/environment-setup/","title":"Developer Environment Setup","text":"<p>This comprehensive guide covers everything you need to set up a complete development environment for the Mosaic Life platform, including multi-system configuration, AWS authentication, Kubernetes access, and CI/CD workflows.</p>"},{"location":"developer-guide/environment-setup/#architecture-overview","title":"Architecture Overview","text":"<p>The Mosaic Life development workflow uses a multi-repository, multi-system architecture:</p> <pre><code>graph TB\n    subgraph \"Windows Desktop\"\n        VS[\"VS Code + SSH Remote\"]\n        Browser[\"Browser (AWS SSO, ArgoCD UI)\"]\n        WinTools[\"AWS CLI, kubectl, gh\"]\n    end\n\n    subgraph \"Linux Development Server\"\n        Code[\"Repository Clones\"]\n        Docker[\"Docker + Compose\"]\n        Tools[\"AWS CLI, kubectl, argocd, gh, just\"]\n        AI[\"AI Coding Assistants\"]\n    end\n\n    subgraph \"GitHub\"\n        Repos[\"Repositories\"]\n        Actions[\"GitHub Actions\"]\n    end\n\n    subgraph \"AWS (us-east-1)\"\n        ECR[\"ECR\"]\n        EKS[\"EKS Cluster\"]\n        S3[\"S3 Buckets\"]\n        SecretsManager[\"Secrets Manager\"]\n    end\n\n    subgraph \"Kubernetes\"\n        ArgoCD[\"ArgoCD\"]\n        Apps[\"Application Pods\"]\n    end\n\n    VS --&gt;|SSH| Code\n    Browser --&gt;|HTTPS| ArgoCD\n    Code --&gt; Docker\n    Tools --&gt; EKS\n    Actions --&gt; ECR\n    Actions --&gt; Repos\n    ECR --&gt; ArgoCD\n    ArgoCD --&gt; Apps</code></pre>"},{"location":"developer-guide/environment-setup/#repository-structure","title":"Repository Structure","text":"<p>Clone the following repositories under <code>/apps</code>:</p> Repository Local Path Purpose mosaic-stories/mosaic-life <code>/apps/mosaic-life</code> Main application (web, API, docs) mosaic-stories/infrastructure <code>/apps/mosaic-life-infrastructure</code> AWS/EKS infrastructure (CDK, eksctl) mosaic-stories/gitops <code>/apps/mosaic-life-gitops</code> Deployment configurations"},{"location":"developer-guide/environment-setup/#system-requirements","title":"System Requirements","text":""},{"location":"developer-guide/environment-setup/#linux-development-server-ubuntu","title":"Linux Development Server (Ubuntu)","text":"<p>This is your primary development environment, accessed via VS Code SSH Remote.</p>"},{"location":"developer-guide/environment-setup/#required-tools","title":"Required Tools","text":"Tool Installation Purpose Docker <code>sudo apt install docker.io</code> Container runtime Docker Compose <code>sudo apt install docker-compose-plugin</code> Local orchestration AWS CLI v2 AWS CLI Install Guide AWS authentication kubectl <code>sudo snap install kubectl --classic</code> Kubernetes CLI eksctl eksctl Installation EKS cluster management ArgoCD CLI ArgoCD CLI Install GitOps deployments GitHub CLI <code>sudo apt install gh</code> GitHub operations Git <code>sudo apt install git</code> Version control just <code>cargo install just</code> or Pre-built binaries Task runner Node.js 20+ NodeSource Frontend development Python 3.12+ <code>sudo apt install python3.12</code> Backend development uv <code>curl -LsSf https://astral.sh/uv/install.sh \\| sh</code> Python package manager jq <code>sudo apt install jq</code> JSON processing yq <code>sudo snap install yq</code> YAML processing ripgrep <code>sudo apt install ripgrep</code> Fast search"},{"location":"developer-guide/environment-setup/#docker-post-installation","title":"Docker Post-Installation","text":"<pre><code># Add your user to the docker group\nsudo usermod -aG docker $USER\n\n# Log out and back in, then verify\ndocker run hello-world\n</code></pre>"},{"location":"developer-guide/environment-setup/#windows-desktop","title":"Windows Desktop","text":"<p>This is your IDE and browser access point.</p>"},{"location":"developer-guide/environment-setup/#required-tools_1","title":"Required Tools","text":"Tool Installation Purpose VS Code Download IDE VS Code Remote - SSH Extension marketplace Connect to Linux server AWS CLI v2 MSI Installer AWS SSO authentication kubectl <code>winget install Kubernetes.kubectl</code> Kubernetes CLI (port-forward) Git Git for Windows Version control"},{"location":"developer-guide/environment-setup/#vs-code-extensions-recommended","title":"VS Code Extensions (Recommended)","text":"<ul> <li>Remote - SSH</li> <li>Docker</li> <li>GitLens</li> <li>Python</li> <li>ESLint</li> <li>Prettier</li> <li>YAML</li> </ul>"},{"location":"developer-guide/environment-setup/#repository-setup","title":"Repository Setup","text":""},{"location":"developer-guide/environment-setup/#clone-repositories-linux","title":"Clone Repositories (Linux)","text":"<pre><code># Create apps directory\nmkdir -p /apps\ncd /apps\n\n# Clone main application\ngit clone https://github.com/mosaic-stories/mosaic-life.git\ncd mosaic-life\ngit checkout develop  # Development branch\ncd ..\n\n# Clone infrastructure\ngit clone https://github.com/mosaic-stories/infrastructure.git mosaic-life-infrastructure\ncd mosaic-life-infrastructure\ngit checkout main\ncd ..\n\n# Clone GitOps\ngit clone https://github.com/mosaic-stories/gitops.git mosaic-life-gitops\ncd mosaic-life-gitops\ngit checkout main\ncd ..\n</code></pre>"},{"location":"developer-guide/environment-setup/#github-cli-authentication","title":"GitHub CLI Authentication","text":"<pre><code># Authenticate with GitHub\ngh auth login\n\n# Select:\n# - GitHub.com\n# - HTTPS\n# - Login with a web browser\n\n# Verify authentication\ngh auth status\n</code></pre>"},{"location":"developer-guide/environment-setup/#aws-authentication","title":"AWS Authentication","text":""},{"location":"developer-guide/environment-setup/#aws-sso-setup-recommended-for-windows","title":"AWS SSO Setup (Recommended for Windows)","text":"<p>On your Windows desktop, configure AWS SSO for automatic credential refresh:</p> <pre><code># Configure SSO profile\naws configure sso\n# SSO session name: mosaiclife\n# SSO start URL: https://d-9067ae6582.awsapps.com/start\n# SSO region: us-east-1\n# SSO registration scopes: sso:account:access\n\n# Login (opens browser)\naws sso login --profile mosaiclife\n\n# Set as default\n$env:AWS_PROFILE = \"mosaiclife\"\n</code></pre>"},{"location":"developer-guide/environment-setup/#manual-credentials-linux","title":"Manual Credentials (Linux)","text":"<p>For the Linux development server, manually update credentials from AWS SSO portal:</p> <ol> <li>Open browser: https://d-9067ae6582.awsapps.com/start/#/?tab=accounts</li> <li>Select MosaicLife account</li> <li>Click Access Keys next to AdministratorAccess</li> <li>Copy the credentials</li> </ol> <pre><code># Update credentials file\naws configure\n\n# When prompted:\n# AWS Access Key ID: &lt;paste from SSO portal&gt;\n# AWS Secret Access Key: &lt;paste from SSO portal&gt;\n# Default region name: us-east-1\n# Default output format: json\n\n# For session token (temporary credentials)\nnano ~/.aws/credentials\n# Add under [default]:\n# aws_session_token = &lt;paste session token&gt;\n</code></pre> <p>Alternatively, use the quick export method:</p> <pre><code># Copy the \"Option 1: Set AWS environment variables\" from SSO portal\nexport AWS_ACCESS_KEY_ID=\"...\"\nexport AWS_SECRET_ACCESS_KEY=\"...\"\nexport AWS_SESSION_TOKEN=\"...\"\n</code></pre> <p>Session Expiration</p> <p>AWS SSO credentials expire after 12 hours. You'll need to refresh them at the start of each coding session.</p>"},{"location":"developer-guide/environment-setup/#verify-aws-access","title":"Verify AWS Access","text":"<pre><code># Check identity\naws sts get-caller-identity\n\n# Expected output:\n# {\n#     \"UserId\": \"...\",\n#     \"Account\": \"033691785857\",\n#     \"Arn\": \"arn:aws:sts::033691785857:assumed-role/AWSReservedSSO_AdministratorAccess_...\"\n# }\n</code></pre>"},{"location":"developer-guide/environment-setup/#kubernetes-configuration","title":"Kubernetes Configuration","text":""},{"location":"developer-guide/environment-setup/#configure-kubectl","title":"Configure kubectl","text":"<pre><code># Update kubeconfig for EKS cluster\naws eks update-kubeconfig --region us-east-1 --name mosaiclife-eks\n\n# Verify connection\nkubectl get nodes\n\n# Expected output:\n# NAME                          STATUS   ROLES    AGE   VERSION\n# ip-10-20-xxx-xxx.ec2.internal Ready    &lt;none&gt;   ...   v1.33.x\n</code></pre>"},{"location":"developer-guide/environment-setup/#using-just-commands","title":"Using just Commands","text":"<p>The <code>/apps/mosaic-life/justfile</code> provides shortcuts:</p> <pre><code>cd /apps/mosaic-life\n\n# Update kubeconfig\njust kubeconfig\n\n# View cluster info\njust cluster-info\n\n# List pods in application namespace\njust pods\n</code></pre>"},{"location":"developer-guide/environment-setup/#argocd-access","title":"ArgoCD Access","text":"<p>ArgoCD is not exposed publicly. Access it via port-forwarding.</p>"},{"location":"developer-guide/environment-setup/#port-forward-setup","title":"Port Forward Setup","text":"Linux (CLI Access)Windows (UI Access) <pre><code>cd /apps/mosaic-life\n\n# Start port-forward (runs in foreground)\njust argocd-ui\n# Or manually:\nkubectl port-forward svc/argocd-server -n argocd 8085:443\n\n# Get admin password\njust argocd-password\n\n# Login via CLI\njust argocd-login\n</code></pre> <pre><code># Start port-forward\nkubectl port-forward svc/argocd-server -n argocd 8085:443\n\n# Open browser: http://localhost:8085\n# Username: admin\n# Password: (get from Linux using just argocd-password)\n</code></pre>"},{"location":"developer-guide/environment-setup/#dual-access-pattern","title":"Dual Access Pattern","text":"<p>For effective development:</p> <ol> <li>Linux terminal: Run <code>just argocd-ui</code> for CLI access</li> <li>Windows browser: Port-forward and access <code>http://localhost:8085</code> for visual monitoring</li> </ol> <pre><code># On Linux - Get password for Windows browser login\njust argocd-password\n</code></pre>"},{"location":"developer-guide/environment-setup/#common-argocd-commands","title":"Common ArgoCD Commands","text":"<pre><code>cd /apps/mosaic-life\n\n# List applications\njust argocd-list\n\n# Check application status\njust argocd-status mosaic-life-staging\n\n# Sync (deploy) application\njust argocd-sync mosaic-life-staging\n\n# Watch sync progress\njust argocd-watch mosaic-life-staging\n\n# View diff before sync\njust argocd-diff mosaic-life-staging\n</code></pre>"},{"location":"developer-guide/environment-setup/#local-development","title":"Local Development","text":""},{"location":"developer-guide/environment-setup/#quick-start","title":"Quick Start","text":"<pre><code>cd /apps/mosaic-life\n\n# Full setup (start services, run migrations, seed data)\njust setup\n\n# Or step by step:\njust dev-up              # Start Docker Compose stack\njust db-migrate          # Run database migrations\njust seed                # Add sample data\n</code></pre>"},{"location":"developer-guide/environment-setup/#service-urls","title":"Service URLs","text":"Service URL Purpose Frontend (dev) http://localhost:5173 Vite dev server with HMR Backend API http://localhost:8080 FastAPI backend PostgreSQL localhost:15432 Database (user: postgres, db: core) Documentation http://localhost:8000 MkDocs (with <code>--profile docs</code>) Jaeger http://localhost:16686 Distributed tracing OpenSearch http://localhost:9200 Search engine"},{"location":"developer-guide/environment-setup/#development-workflows","title":"Development Workflows","text":"Frontend OnlyBackend OnlyFull StackDocumentation <pre><code>cd /apps/mosaic-life/apps/web\nnpm install\nnpm run dev\n</code></pre> <pre><code>cd /apps/mosaic-life/services/core-api\nuv sync\nuv run alembic upgrade head\nuv run python -m app.main\n</code></pre> <pre><code>cd /apps/mosaic-life\njust dev-up     # Start all services\njust logs       # Tail logs\n</code></pre> <pre><code>cd /apps/mosaic-life\njust docs-serve   # Serve locally at :8000\n</code></pre>"},{"location":"developer-guide/environment-setup/#database-operations","title":"Database Operations","text":"<pre><code>cd /apps/mosaic-life\n\n# Access PostgreSQL shell\njust db-shell\n\n# Or directly:\ndocker compose -f infra/compose/docker-compose.yml exec postgres psql -U postgres -d core\n\n# Run migrations\njust db-migrate\n\n# Create new migration\ncd services/core-api\nuv run alembic revision --autogenerate -m \"add_new_table\"\n</code></pre>"},{"location":"developer-guide/environment-setup/#cicd-workflow","title":"CI/CD Workflow","text":""},{"location":"developer-guide/environment-setup/#branch-strategy","title":"Branch Strategy","text":"Branch Environment Domain Auto-Deploy <code>develop</code> Staging stage.mosaiclife.me Yes <code>main</code> Production mosaiclife.me Yes <code>feature/*</code> Preview pr-{n}.mosaiclife.me On PR"},{"location":"developer-guide/environment-setup/#deployment-flow","title":"Deployment Flow","text":"<pre><code>sequenceDiagram\n    participant Dev as Developer\n    participant GH as GitHub\n    participant GA as GitHub Actions\n    participant ECR as AWS ECR\n    participant GitOps as GitOps Repo\n    participant Argo as ArgoCD\n    participant K8s as Kubernetes\n\n    Dev-&gt;&gt;GH: Push to develop\n    GH-&gt;&gt;GA: Trigger workflow\n    GA-&gt;&gt;GA: Build &amp; Test\n    GA-&gt;&gt;ECR: Push Docker images\n    GA-&gt;&gt;GitOps: Update image tags\n    GitOps-&gt;&gt;Argo: Detect changes\n    Argo-&gt;&gt;K8s: Deploy new version\n    K8s--&gt;&gt;Dev: Staging available</code></pre>"},{"location":"developer-guide/environment-setup/#monitoring-cicd","title":"Monitoring CI/CD","text":""},{"location":"developer-guide/environment-setup/#github-actions","title":"GitHub Actions","text":"<pre><code># List recent workflow runs\ngh run list --repo mosaic-stories/mosaic-life\n\n# View specific run\ngh run view &lt;run-id&gt;\n\n# Watch running workflow\ngh run watch &lt;run-id&gt;\n\n# View logs for failed job\ngh run view &lt;run-id&gt; --log-failed\n</code></pre>"},{"location":"developer-guide/environment-setup/#argocd-status","title":"ArgoCD Status","text":"<pre><code>cd /apps/mosaic-life\n\n# Check all applications\njust argocd-list\n\n# Detailed status\njust argocd-status mosaic-life-staging\n\n# Watch sync progress\njust argocd-watch mosaic-life-staging\n</code></pre>"},{"location":"developer-guide/environment-setup/#troubleshooting-deployments","title":"Troubleshooting Deployments","text":"<pre><code># View pod status\njust pods\n\n# Tail application logs\njust logs core-api\njust logs web\n\n# Describe failing pod\nkubectl describe pod -n mosaiclife &lt;pod-name&gt;\n\n# Get events\nkubectl get events -n mosaiclife --sort-by='.lastTimestamp'\n\n# Execute into pod\njust exec core-api bash\n</code></pre>"},{"location":"developer-guide/environment-setup/#environment-domains","title":"Environment Domains","text":""},{"location":"developer-guide/environment-setup/#production","title":"Production","text":"Service URL Web Application https://mosaiclife.me API https://api.mosaiclife.me Documentation https://docs.mosaiclife.me"},{"location":"developer-guide/environment-setup/#staging","title":"Staging","text":"Service URL Web Application https://stage.mosaiclife.me API https://stage-api.mosaiclife.me Documentation https://stage-docs.mosaiclife.me"},{"location":"developer-guide/environment-setup/#preview-environments","title":"Preview Environments","text":"<p>Preview environments are created automatically for pull requests:</p> <ul> <li>Web: <code>https://pr-{number}.mosaiclife.me</code></li> <li>API: <code>https://pr-{number}-api.mosaiclife.me</code></li> </ul> <p>Preview Environment Status</p> <p>Preview environments are currently in development. Some workflow issues are being debugged.</p>"},{"location":"developer-guide/environment-setup/#code-quality-validation","title":"Code Quality &amp; Validation","text":""},{"location":"developer-guide/environment-setup/#before-committing","title":"Before Committing","text":"<pre><code>cd /apps/mosaic-life\n\n# Validate everything\njust validate-all\n\n# Or separately:\njust validate-backend    # Ruff + MyPy\njust validate-frontend   # ESLint + TypeScript\n\n# Auto-fix issues\njust lint-fix-backend\n</code></pre>"},{"location":"developer-guide/environment-setup/#backend-validation","title":"Backend Validation","text":"<pre><code>cd /apps/mosaic-life/services/core-api\n\n# Linting\nuv run ruff check .\n\n# Type checking\nuv run mypy app\n\n# Format check\nuv run ruff format --check .\n\n# Auto-fix\nuv run ruff check --fix .\nuv run ruff format .\n</code></pre>"},{"location":"developer-guide/environment-setup/#frontend-validation","title":"Frontend Validation","text":"<pre><code>cd /apps/mosaic-life/apps/web\n\n# Lint\nnpm run lint\n\n# Type check\nnpm run typecheck\n\n# Test\nnpm run test\n</code></pre>"},{"location":"developer-guide/environment-setup/#typical-development-session","title":"Typical Development Session","text":""},{"location":"developer-guide/environment-setup/#start-of-session","title":"Start of Session","text":"<pre><code># 1. Refresh AWS credentials (from browser SSO portal)\n# Navigate to: https://d-9067ae6582.awsapps.com/start/#/?tab=accounts\n# Copy credentials and update ~/.aws/credentials\n\n# 2. Verify AWS access\naws sts get-caller-identity\n\n# 3. Update kubeconfig\njust kubeconfig\n\n# 4. Start port-forwards for ArgoCD (optional)\njust argocd-ui &amp;  # Background on Linux\n# Also start on Windows for UI access\n\n# 5. Start local development stack\njust dev-up\n\n# 6. Pull latest changes\ngit pull origin develop\n</code></pre>"},{"location":"developer-guide/environment-setup/#during-development","title":"During Development","text":"<pre><code># Make changes...\n\n# Validate before commit\njust validate-all\n\n# Commit with conventional format\ngit add .\ngit commit -m \"feat: add user profile editing\"\n\n# Push to trigger CI/CD\ngit push origin develop\n</code></pre>"},{"location":"developer-guide/environment-setup/#monitoring-deployment","title":"Monitoring Deployment","text":"<pre><code># Watch GitHub Actions\ngh run watch\n\n# Once Actions complete, watch ArgoCD\njust argocd-watch mosaic-life-staging\n\n# Verify deployment\nkubectl get pods -n mosaiclife\njust logs core-api\n</code></pre>"},{"location":"developer-guide/environment-setup/#end-of-session","title":"End of Session","text":"<pre><code># Stop local services\njust dev-down\n\n# Or keep running for background testing\n</code></pre>"},{"location":"developer-guide/environment-setup/#quick-reference","title":"Quick Reference","text":""},{"location":"developer-guide/environment-setup/#just-commands","title":"Just Commands","text":"Command Description <code>just setup</code> Full local setup <code>just dev-up</code> Start Docker Compose <code>just dev-down</code> Stop Docker Compose <code>just logs [service]</code> Tail logs <code>just pods</code> List Kubernetes pods <code>just validate-all</code> Run all validations <code>just argocd-ui</code> Port-forward to ArgoCD <code>just argocd-password</code> Get admin password <code>just argocd-status [app]</code> Check app status <code>just argocd-sync [app]</code> Trigger deployment"},{"location":"developer-guide/environment-setup/#useful-aliases","title":"Useful Aliases","text":"<p>Add to your <code>~/.bashrc</code> or <code>~/.zshrc</code>:</p> <pre><code># Quick navigation\nalias ml='cd /apps/mosaic-life'\nalias mli='cd /apps/mosaic-life-infrastructure'\nalias mlg='cd /apps/mosaic-life-gitops'\n\n# Kubernetes shortcuts\nalias k='kubectl'\nalias kgp='kubectl get pods -n mosaiclife'\nalias kgs='kubectl get svc -n mosaiclife'\nalias kl='kubectl logs -n mosaiclife'\n\n# Docker shortcuts\nalias dc='docker compose -f /apps/mosaic-life/infra/compose/docker-compose.yml'\n</code></pre>"},{"location":"developer-guide/environment-setup/#troubleshooting","title":"Troubleshooting","text":""},{"location":"developer-guide/environment-setup/#aws-credentials-expired","title":"AWS Credentials Expired","text":"<pre><code># Error: ExpiredToken\n# Solution: Refresh from SSO portal\n# https://d-9067ae6582.awsapps.com/start/#/?tab=accounts\n</code></pre>"},{"location":"developer-guide/environment-setup/#kubectl-connection-refused","title":"kubectl Connection Refused","text":"<pre><code># Error: Unable to connect to the server\n# Solution: Update kubeconfig\naws eks update-kubeconfig --region us-east-1 --name mosaiclife-eks\n</code></pre>"},{"location":"developer-guide/environment-setup/#argocd-connection-failed","title":"ArgoCD Connection Failed","text":"<pre><code># Error: dial tcp 127.0.0.1:8085: connect: connection refused\n# Solution: Start port-forward\nkubectl port-forward svc/argocd-server -n argocd 8085:443\n</code></pre>"},{"location":"developer-guide/environment-setup/#docker-compose-issues","title":"Docker Compose Issues","text":"<pre><code># Reset everything\ndocker compose -f infra/compose/docker-compose.yml down\ndocker volume prune -f\ndocker compose -f infra/compose/docker-compose.yml up -d\n</code></pre>"},{"location":"developer-guide/environment-setup/#database-migration-conflicts","title":"Database Migration Conflicts","text":"<pre><code>cd /apps/mosaic-life/services/core-api\n\n# Check current revision\nuv run alembic current\n\n# View history\nuv run alembic history\n\n# Rollback one step\nuv run alembic downgrade -1\n\n# Reset to base\nuv run alembic downgrade base\nuv run alembic upgrade head\n</code></pre>"},{"location":"developer-guide/environment-setup/#related-documentation","title":"Related Documentation","text":"<ul> <li>Local Development Setup - Basic local setup</li> <li>Architecture Overview - System architecture</li> <li>Contributing Guide - Contribution guidelines</li> <li>API Reference - API documentation</li> </ul>"},{"location":"developer-guide/local-setup/","title":"Local Development Setup","text":"<p>This guide provides detailed instructions for setting up a development environment.</p>"},{"location":"developer-guide/local-setup/#prerequisites","title":"Prerequisites","text":""},{"location":"developer-guide/local-setup/#required-tools","title":"Required Tools","text":"Tool Version Purpose Docker 24+ Container runtime Docker Compose 2.20+ Local orchestration Node.js 20+ Frontend development Python 3.12+ Backend development uv Latest Python package manager"},{"location":"developer-guide/local-setup/#optional-tools","title":"Optional Tools","text":"<ul> <li>Just (command runner)</li> <li>VS Code with recommended extensions</li> </ul>"},{"location":"developer-guide/local-setup/#full-stack-setup","title":"Full Stack Setup","text":"<pre><code># Start all services\ndocker compose -f infra/compose/docker-compose.yml up -d\n\n# View logs\ndocker compose -f infra/compose/docker-compose.yml logs -f\n</code></pre>"},{"location":"developer-guide/local-setup/#frontend-only","title":"Frontend Only","text":"<pre><code>cd apps/web\nnpm install\nnpm run dev\n</code></pre>"},{"location":"developer-guide/local-setup/#backend-only","title":"Backend Only","text":"<pre><code>cd services/core-api\nuv sync\nuv run alembic upgrade head\nuv run python -m app.main\n</code></pre>"},{"location":"developer-guide/local-setup/#database-access","title":"Database Access","text":"<pre><code>docker compose -f infra/compose/docker-compose.yml exec postgres psql -U postgres -d core\n</code></pre>"},{"location":"getting-started/first-steps/","title":"First Steps","text":"<p>After installation, follow these steps to get started with Mosaic Life.</p>"},{"location":"getting-started/first-steps/#create-an-account","title":"Create an Account","text":"<ol> <li>Navigate to http://localhost:5173</li> <li>Click \"Sign in with Google\"</li> <li>Complete the OAuth flow</li> </ol>"},{"location":"getting-started/first-steps/#create-your-first-legacy","title":"Create Your First Legacy","text":"<p>A legacy is a collection of stories about a person's life.</p> <ol> <li>Click \"Create Legacy\" from the dashboard</li> <li>Enter the person's name and details</li> <li>Add your first story</li> </ol>"},{"location":"getting-started/first-steps/#next-steps","title":"Next Steps","text":"<ul> <li>Learn about Creating Stories</li> <li>Invite family members to Share Memories</li> </ul>"},{"location":"getting-started/installation/","title":"Installation","text":"<p>This guide covers setting up Mosaic Life for local development.</p>"},{"location":"getting-started/installation/#prerequisites","title":"Prerequisites","text":"<ul> <li>Docker and Docker Compose</li> <li>Node.js 20+</li> <li>Python 3.12+</li> <li>uv (Python package manager)</li> </ul>"},{"location":"getting-started/installation/#quick-start","title":"Quick Start","text":"<ol> <li> <p>Clone the repository:</p> <pre><code>git clone https://github.com/mosaic-stories/mosaic-life.git\ncd mosaic-life\n</code></pre> </li> <li> <p>Start all services:</p> <pre><code>docker compose -f infra/compose/docker-compose.yml up -d\n</code></pre> </li> <li> <p>Access the application:</p> <ul> <li>Frontend: http://localhost:5173</li> <li>API: http://localhost:8080</li> <li>API Docs: http://localhost:8080/docs</li> </ul> </li> </ol>"},{"location":"reference/python/","title":"Python API Reference","text":"<p>Auto-generated documentation for the Mosaic Life backend (FastAPI).</p>"},{"location":"reference/python/#modules","title":"Modules","text":""},{"location":"reference/python/#app.main","title":"app.main","text":""},{"location":"reference/python/#app.config","title":"app.config","text":""},{"location":"reference/python/#app.models","title":"app.models","text":"<p>SQLAlchemy models for the application.</p>"},{"location":"reference/python/#app.models.Invitation","title":"Invitation","text":"<p>               Bases: <code>Base</code></p> <p>Invitation model for inviting users to join a legacy.</p>"},{"location":"reference/python/#app.models.Invitation.is_pending","title":"is_pending  <code>property</code>","text":"<pre><code>is_pending\n</code></pre> <p>Check if invitation is still pending.</p>"},{"location":"reference/python/#app.models.Invitation.is_expired","title":"is_expired  <code>property</code>","text":"<pre><code>is_expired\n</code></pre> <p>Check if invitation has expired.</p>"},{"location":"reference/python/#app.models.Invitation.status","title":"status  <code>property</code>","text":"<pre><code>status\n</code></pre> <p>Get the current status of the invitation.</p>"},{"location":"reference/python/#app.models.Legacy","title":"Legacy","text":"<p>               Bases: <code>Base</code></p> <p>Legacy model representing a person being remembered.</p>"},{"location":"reference/python/#app.models.LegacyMember","title":"LegacyMember","text":"<p>               Bases: <code>Base</code></p> <p>LegacyMember model for access control and join requests.</p>"},{"location":"reference/python/#app.models.Media","title":"Media","text":"<p>               Bases: <code>Base</code></p> <p>Media model for uploaded files.</p>"},{"location":"reference/python/#app.models.Notification","title":"Notification","text":"<p>               Bases: <code>Base</code></p> <p>Notification model for user notifications.</p>"},{"location":"reference/python/#app.models.User","title":"User","text":"<p>               Bases: <code>Base</code></p> <p>User model representing authenticated users via Google OAuth.</p>"},{"location":"reference/python/#app.schemas","title":"app.schemas","text":"<p>Pydantic schemas for API request/response validation.</p>"},{"location":"reference/python/#app.schemas.InvitationAcceptResponse","title":"InvitationAcceptResponse","text":"<p>               Bases: <code>BaseModel</code></p> <p>Schema for successful invitation acceptance.</p>"},{"location":"reference/python/#app.schemas.InvitationCreate","title":"InvitationCreate","text":"<p>               Bases: <code>BaseModel</code></p> <p>Schema for creating an invitation.</p> <p>Either email or user_id must be provided, but not both.</p>"},{"location":"reference/python/#app.schemas.InvitationCreate.validate_email_or_user_id","title":"validate_email_or_user_id","text":"<pre><code>validate_email_or_user_id()\n</code></pre> <p>Ensure exactly one of email or user_id is provided.</p>"},{"location":"reference/python/#app.schemas.InvitationPreview","title":"InvitationPreview","text":"<p>               Bases: <code>BaseModel</code></p> <p>Schema for invitation preview (shown to invitee before accepting).</p>"},{"location":"reference/python/#app.schemas.InvitationResponse","title":"InvitationResponse","text":"<p>               Bases: <code>BaseModel</code></p> <p>Schema for invitation response.</p>"},{"location":"reference/python/#app.schemas.LegacyCreate","title":"LegacyCreate","text":"<p>               Bases: <code>BaseModel</code></p> <p>Schema for creating a new legacy.</p>"},{"location":"reference/python/#app.schemas.LegacyMemberResponse","title":"LegacyMemberResponse","text":"<p>               Bases: <code>BaseModel</code></p> <p>Schema for legacy member information.</p>"},{"location":"reference/python/#app.schemas.LegacyResponse","title":"LegacyResponse","text":"<p>               Bases: <code>BaseModel</code></p> <p>Schema for legacy response.</p>"},{"location":"reference/python/#app.schemas.LegacySearchResponse","title":"LegacySearchResponse","text":"<p>               Bases: <code>BaseModel</code></p> <p>Schema for legacy search results.</p>"},{"location":"reference/python/#app.schemas.LegacyUpdate","title":"LegacyUpdate","text":"<p>               Bases: <code>BaseModel</code></p> <p>Schema for updating an existing legacy.</p>"},{"location":"reference/python/#app.schemas.UserSearchResult","title":"UserSearchResult","text":"<p>               Bases: <code>BaseModel</code></p> <p>Schema for user search result.</p>"},{"location":"reference/python/#app.routes","title":"app.routes","text":"<p>API route handlers.</p>"},{"location":"reference/typescript/","title":"TypeScript API Reference","text":"<p>Auto-generated documentation for the Mosaic Life frontend (React).</p> <p>Build-time Generation</p> <p>This documentation is generated from TypeScript source code during the docs build process.</p>"},{"location":"user-guide/creating-stories/","title":"Creating Stories","text":"<p>Stories are the heart of Mosaic Life. Each story captures a memory, moment, or milestone.</p>"},{"location":"user-guide/creating-stories/#writing-a-story","title":"Writing a Story","text":"<ol> <li>Open a legacy</li> <li>Click \"Add Story\"</li> <li>Enter a title and start writing</li> </ol>"},{"location":"user-guide/creating-stories/#using-the-editor","title":"Using the Editor","text":"<p>The story editor supports rich text formatting:</p> <ul> <li>Bold and italic text</li> <li>Headers and lists</li> <li>Images and media</li> <li>Links</li> </ul>"},{"location":"user-guide/creating-stories/#saving-and-publishing","title":"Saving and Publishing","text":"<p>Stories are saved automatically as drafts. When ready, click \"Publish\" to share with legacy members.</p>"},{"location":"user-guide/sharing-memories/","title":"Sharing Memories","text":"<p>Mosaic Life is designed for collaborative storytelling. Invite family and friends to contribute.</p>"},{"location":"user-guide/sharing-memories/#inviting-members","title":"Inviting Members","text":"<ol> <li>Open a legacy</li> <li>Click \"Members\"</li> <li>Enter email addresses to invite</li> </ol>"},{"location":"user-guide/sharing-memories/#member-roles","title":"Member Roles","text":"<ul> <li>Owner: Full control, can delete legacy</li> <li>Editor: Can add and edit stories</li> <li>Viewer: Read-only access</li> </ul>"},{"location":"user-guide/sharing-memories/#privacy-settings","title":"Privacy Settings","text":"<p>Control who can see your legacy:</p> <ul> <li>Private: Only invited members</li> <li>Family: Extended family with link</li> <li>Public: Anyone with the link</li> </ul>"}]}